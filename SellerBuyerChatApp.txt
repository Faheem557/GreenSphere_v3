I provide you in this file a Controllers code , views,routes and events code. 





							UserController







<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;


 use App\Models\Admin;
use App\Models\Chat;
 use App\Models\User;
 use Illuminate\Support\Facades\Hash;
use Illuminate\Support\Facades\Storage;
class UserController extends Controller
{
    public function updateProfile(Request $request)
    {
        $userId = session('LoggedUserInfo');
        $user = User::find($userId);
    
        if (!$user) {
            return redirect('user/login')->with('fail', 'You must be logged in to update the profile');
        }
    
        $request->validate([
            'name' => 'required|string|max:255',
            'phone_number' => 'required|string|max:15',
            'bio' => 'nullable|string',
            'picture' => 'nullable|image|mimes:jpeg,png,jpg,gif|max:2048',
        ]);
    
        // Update user details
        $user->name = $request->name;
        $user->phone_number = $request->phone_number;
        $user->bio = $request->bio;
    
        if ($request->hasFile('picture')) {
            // Delete the old profile picture if it exists
            if ($user->picture) {
                Storage::disk('public')->delete($user->picture);
            }
    
            // Store the new picture
            $file = $request->file('picture');
            $filename = time() . '.' . $file->getClientOriginalExtension();
            $path = $file->storeAs('profile_pictures', $filename, 'public');
    
            // Save the path to the user's picture
            $user->picture = $path;
        }
    
        // Save the user profile updates
        $user->save();
    
        return redirect()->back()->with('success', 'Profile updated successfully.');
    }
    
 

    
    public function post() {

        $users = User::all();
        return view('user.post', [
            'users' => $users 
        ]);
    }
    
    public function register() {
        return view("user.register");
    }
    public function login() {
        return view("user.login");
    }
    public function chats()
{
    $userId = session('LoggedUserInfo');
    $LoggedUserInfo = User::find($userId);
    
    if (!$LoggedUserInfo) {
        return redirect('user/login')->with('fail', 'You must be logged in to access the dashboard');
    }

    // Fetch users based on the role
    if ($LoggedUserInfo->role == 'seller') {
        // If user is a seller, fetch all buyers
        $users = User::where('role', 'buyer')->get();
    } else {
        // If user is a buyer, fetch all sellers
        $users = User::where('role', 'seller')->get();
    }
    
    return view('user.chats', [
        'LoggedUserInfo' => $LoggedUserInfo,
        'users' => $users, // Pass buyers or sellers based on role
    ]);
}

    
    public function edit()
    {
        
        $userId = session('LoggedUserInfo');
        $LoggedUserInfo = User::find($userId);
    
        if (!$LoggedUserInfo) {
            return redirect('user/login')->with('fail', 'You must be logged in to access the dashboard');
        }
     
       
    return view('user.profileedit', [
        'LoggedUserInfo' => $LoggedUserInfo,
       
    ]);
    }
    
    public function profile()
    {
        
        $userId = session('LoggedUserInfo');
        $LoggedUserInfo = User::find($userId);
    
        if (!$LoggedUserInfo) {
            return redirect('user/login')->with('fail', 'You must be logged in to access the dashboard');
        }
     
       
    return view('user.profileview', [
        'LoggedUserInfo' => $LoggedUserInfo,
      
    ]);
    }
    
    
    public function dashboard()
    {
        $userId = session('LoggedUserInfo');
    
        // Check if the session has the correct user ID
        if (!$userId) {
            return redirect('user/login')->with('fail', 'You must be logged in to access the dashboard');
        }
    
        $LoggedUserInfo = User::find($userId);
    
        // Fetch the count of messages for the user
     
        // Fetch the messages, ensuring they are ordered by the newest first
        
    
        return view('user.dashboard', [
            'LoggedUserInfo' => $LoggedUserInfo,
       
        ]);
    }
    
    
    
    public function check(Request $request)
{
     $request->validate([
        'email' => 'required|email',
        'password' => 'required|min:5|max:12'
    ]);

     $userInfo = User::where('email', $request->email)->first();

     if (!$userInfo) {
        return back()->withInput()->withErrors(['email' => 'Email not found']);
    }
      if ($userInfo->status === 'inactive') {
         return back()->withInput()->withErrors(['status' => 'Your account is inactive']);
        }

     if (!Hash::check($request->password, $userInfo->password)) {
        return back()->withInput()->withErrors(['password' => 'Incorrect password']);
    }

     session([
        'LoggedUserInfo' => $userInfo->id,
        'LoggedUserName' => $userInfo->name,  
    ]);
     return redirect()->route('user.dashboard');
}

    

    

    public function logout()
    {
         if (session()->has('LoggedUserInfo')) {
             session()->forget('LoggedUserInfo');
        }
        session()->flush();

         return redirect()->route('user.dashboard');
    }
    
 
    public function save(Request $request)
    {
        // Validation for inputs
        $request->validate([
            'name' => 'required|string|max:255',
            'email' => 'required|string|email|max:255|unique:users',
            'password' => 'required|string|min:8|regex:/^\S*$/',
            'role' => 'required|in:buyer,seller',  // Validate role to be either 'buyer' or 'seller'
        ], [
            'email.unique' => 'This email is already registered.',
            'password.min' => 'Password must be at least 8 characters long.',
            'role.in' => 'Role must be either buyer or seller.',
        ]);
    
         
        $user = User::create([
            'name' => $request->name,
            'email' => $request->email,
            'password' => Hash::make($request->password),
            'role' => $request->role,   
        ]);
    
        return redirect()->route('user.login')->with('success', 'User created successfully!');
    }
    

}







							navbar.blade.php


							

<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Include necessary CSS and JS libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://js.pusher.com/7.0/pusher.min.js"></script>
    <style>
        .dropdown-menu {
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
        <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
            <a class="navbar-brand brand-logo mr-5" href="index.html"><img src="/images/logo.svg" class="mr-2" alt="logo" /></a>
            <a class="navbar-brand brand-logo-mini" href="index.html"><img src="/images/logo-mini.svg" alt="logo" /></a>
        </div>
        <div class="navbar-menu-wrapper d-flex align-items-center justify-content-end">
            <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
                <span class="icon-menu"></span>
            </button>
            <ul class="navbar-nav mr-lg-2">
                <li class="nav-item nav-search d-none d-lg-block">
                    <div class="input-group">
                        <div class="input-group-prepend hover-cursor" id="navbar-search-icon">
                            <span class="input-group-text" id="search"></span>
                        </div>
                    </div>
                </li>
            </ul>
            <ul class="navbar-nav navbar-nav-right">
                <li class="nav-item dropdown">
                    <a class="nav-link count-indicator dropdown-toggle" id="notificationDropdown" href="#" data-toggle="dropdown">
                    <i class="fas fa-bell mx-0"></i>

                    </a>                  
                    
                 <b>   <span id="notificationCount" class="count">&nbsp;  </span> <!-- Initial value here -->
                 </b>
                    <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list" aria-labelledby="notificationDropdown">
                        <p class="mb-0 font-weight-normal float-left dropdown-header">Notifications</p>
                       
                        <a class="dropdown-item preview-item">
                            <div class="preview-thumbnail">
                                <div class="preview-icon bg-success">
                                    <i class="ti-info-alt mx-0"></i>
                                </div>
                            </div>
                            <div class="preview-item-content">
                                <h6 class="preview-subject font-weight-normal">New Message</h6>
                                <p class="font-weight-light small-text mb-0 text-muted">
                                   
                                </p>
                            </div>
                        </a>
                      
                    </div>
                </li>
                <li class="nav-item nav-profile dropdown">
                    <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" id="profileDropdown">
                        @if($LoggedUserInfo->picture)
                        <img src="{{ asset('storage/' . $LoggedUserInfo->picture) }}" alt="profile" class="rounded-circle" style="width: 35px; height: 35px;">
                        @else
                        <img src="/images/faces/face28.jpg" alt="profile" class="rounded-circle" style="width: 35px; height: 35px;">
                        @endif
                    </a>
                    <div class="dropdown-menu dropdown-menu-right navbar-dropdown" aria-labelledby="profileDropdown">
                        <a class="dropdown-item" href="{{ route('user.profileview') }}">
                            <i class="ti-user text-primary"></i>
                            Profile
                        </a>
                        <form id="logout-form" action="{{ route('user.logout') }}" method="GET" style="display: inline;">
                            @csrf
                            <button type="submit" class="dropdown-item">
                                <i class="ti-power-off text-primary"></i>
                                Logout
                            </button>
                        </form>
                    </div>
                </li>
            </ul>
            <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
                <span class="icon-menu"></span>
            </button>
        </div>
    </nav>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/pusher/7.0.3/pusher.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        var notificationCount = document.getElementById('notificationCount');

        var pusher = new Pusher('89f4dd829f60fced8820', {
            cluster: 'ap2'
        });

        var loggedUserId = '{{ $LoggedUserInfo['id'] }}';
        var channel = pusher.subscribe('chat.' + loggedUserId); // Subscribing to the chat channel for the logged-in user

        channel.bind('seller-buyer-message', function(data) {
            // Check if the `receiver_id` matches the logged user's ID
            if (data.receiver_id == loggedUserId) {
                toastr.options = {
                    "closeButton": true,          // Show close button
                    "progressBar": true,          // Show progress bar
                    "positionClass": "toast-top-right",  // Position of the toast
                    "timeOut": "300000",          // Set timeout to 5 minutes (300,000 milliseconds)
                    "extendedTimeOut": "300000",  // Extend timeout if the user hovers over the toast
                    "tapToDismiss": false         // Prevent dismissing by clicking on the toast itself
                };
                toastr.info(`${data.sender_name} sent you a message: ${data.message}`, 'New Message');

                // Update notification count
                var currentCount = parseInt(notificationCount.textContent) || 0;
                notificationCount.textContent = currentCount + 1;

                // Prepend new message to the dropdown menu
                var dropdownMenu = document.querySelector('.dropdown-menu');
                var messageItem = document.createElement('a');
                messageItem.classList.add('dropdown-item', 'preview-item');
                messageItem.innerHTML = `
                    <div class="preview-thumbnail">
                        <div class="preview-icon bg-success">
                            <i class="ti-info-alt mx-0"></i>
                        </div>
                    </div>
                    <div class="preview-item-content">
                        <h6 class="preview-subject font-weight-normal">${data.sender_name}</h6>
                        <p class="font-weight-light small-text mb-0 text-muted">
                            ${data.message}<br>
                            ${data.time}
                        </p>
                    </div>
                `;
                dropdownMenu.prepend(messageItem); // Prepend to show it first
            }
        });
    });
</script>


</body>
</html>



							sidebar.blade.php

							


<nav class="sidebar sidebar-offcanvas" id="sidebar">
    <ul class="nav">
        <li class="nav-item">
            <a class="nav-link" href="/user/dashboard">
                <i class="fas fa-tachometer-alt menu-icon"></i>
                <span class="menu-title">Dashboard</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="#ui-basic" aria-expanded="false" aria-controls="ui-basic">
                <i class="fas fa-user menu-icon"></i>
                <span class="menu-title">Profile</span>
                <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="ui-basic">
                <ul class="nav flex-column sub-menu">
                    <li class="nav-item"> <a class="nav-link" href="/user/profileview">View</a></li>
                    <li class="nav-item"> <a class="nav-link" href="/user/profileedit">Edit</a></li>
                </ul>
            </div>
        </li>
        <li class="nav-item">
    <a class="nav-link" data-toggle="collapse" href="#chat-support" aria-expanded="false" aria-controls="chat-support">
        <i class="fas fa-comments menu-icon"></i>
        <span class="menu-title">Chat Support</span>
        <i class="menu-arrow"></i>
    </a>
    <div class="collapse" id="chat-support">
        <ul class="nav flex-column sub-menu">
            <li class="nav-item"> <a class="nav-link" href="/user/chats">Chat Support</a></li>
        </ul>
    </div>
</li>

        
    </ul>
</nav>


	

							register.blade.php


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link rel="stylesheet" href="/vendors/feather/feather.css">
    <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" href="/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" href="/vendors/datatables.net-bs4/dataTables.bootstrap4.css">
    <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" type="text/css" href="/usertemplate/js/select.dataTables.min.css">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="/css/vertical-layout-light/style.css">
    <!-- endinject -->
    <link rel="shortcut icon" href="/images/favicon.png" />

    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Toastr CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet">
</head>

<body>
    <div class="container-scroller">
        <div class="container-fluid page-body-wrapper full-page-wrapper">
            <div class="content-wrapper d-flex align-items-center auth px-0">
                <div class="row w-100 mx-0">
                    <div class="col-lg-4 mx-auto">
                        <div class="auth-form-light text-left py-5 px-4 px-sm-5">
                            <div class="brand-logo">
                                <img src="/images/logo.svg" alt="logo">
                            </div>
                            <h4>Seller & Buyer Web App</h4>
                             @if (session('success'))
                            <div>{{ session('success') }}</div>
                            @endif
                            <form action="{{ route('user.save') }}" method="POST">
    @csrf
    <div class="form-group">
        <label for="name">Name</label>
        <input type="text" class="form-control" id="name" name="name" required>
    </div>
    <div class="form-group">
        <label for="email">Email</label>
        <input type="email" class="form-control" id="email" name="email" required>
    </div>
    <div class="form-group">
        <label for="password">Password (min. 8 characters)</label>
        <input type="password" class="form-control" id="password" name="password" required>
    </div>
    <div class="form-group">
        <label for="role">Role</label>
        <select class="form-control" id="role" name="role" required>
            <option value="buyer">Buyer</option>
            <option value="seller">Seller</option>
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Register</button>
</form>


                            <div class="text-center mt-4 font-weight-light">
                                Already have an account? <a href="/user/login" class="text-primary">Login</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- content-wrapper ends -->
        </div>
        <!-- page-body-wrapper ends -->
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Toastr JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

   
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="/js/off-canvas.js"></script>
    <script src="/js/hoverable-collapse.js"></script>
    <script src="/js/template.js"></script>
    <script src="/js/settings.js"></script>
    <script src="/js/todolist.js"></script>
</body>

</html>






								login.blade.php


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="/vendors/feather/feather.css">
    <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" href="/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" href="/vendors/datatables.net-bs4/dataTables.bootstrap4.css">
    <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" type="text/css" href="/usertemplate/js/select.dataTables.min.css">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="/css/vertical-layout-light/style.css">
    <!-- endinject -->
    <link rel="shortcut icon" href="/images/favicon.png" />

    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Toastr CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet">
</head>

<body>
    <div class="container-scroller">
        <div class="container-fluid page-body-wrapper full-page-wrapper">
            <div class="content-wrapper d-flex align-items-center auth px-0">
                <div class="row w-100 mx-0">
                    <div class="col-lg-4 mx-auto">
                        <div class="auth-form-light text-left py-5 px-4 px-sm-5">
                            <div class="brand-logo">
                                <img src="/images/logo.svg" alt="logo">
                            </div> @if (session('success'))
                                <div class="alert alert-success">
                                    {{ session('success') }}
                                </div>
                            @endif
                            <h4>Seller & Buyer Web App</h4>
 
                            @if ($errors->any())
                                <div class="alert alert-danger">
                                    <ul>
                                        @foreach ($errors->all() as $error)
                                            <li>{{ $error }}</li>
                                        @endforeach
                                    </ul>
                                </div>
                            @endif
                            <form action="{{ route('user.check') }}" method="POST">
                                @csrf
                                <div class="form-group">
                                    <label for="email">Email</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                                <div class="form-group">
                                    <label for="password">Password</label>
                                    <input type="password" class="form-control" id="password" name="password" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Login</button>
                            </form>


                            <div class="text-center mt-4 font-weight-light">
    Don't have an account? <a href="/user/register" class="text-primary">Create</a>
</div>
 

                        </div>
                    </div>
                </div>
            </div>
            <!-- content-wrapper ends -->
        </div>
        <!-- page-body-wrapper ends -->
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Toastr JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

   
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="/js/off-canvas.js"></script>
    <script src="/js/hoverable-collapse.js"></script>
    <script src="/js/template.js"></script>
    <script src="/js/settings.js"></script>
    <script src="/js/todolist.js"></script>
</body>

</html>









						dashboard.blade.php





<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Skydash Admin</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://js.pusher.com/8.2.0/pusher.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <link rel="stylesheet" href="/vendors/feather/feather.css">
    <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" href="/vendors/css/vendor.bundle.base.css">
    <script src="https://kit.fontawesome.com/YOUR_KIT_ID.js" crossorigin="anonymous"></script>

    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" href="/vendors/datatables.net-bs4/dataTables.bootstrap4.css">
    <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" type="text/css" href="/js/select.dataTables.min.css">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="/css/vertical-layout-light/style.css">
    <!-- endinject -->
    <link rel="shortcut icon" href="/images/favicon.png" />
</head>


<body>

    <div class="container-scroller">
        <!-- partial:partials/_navbar.html -->
        @include('user.includes.navbar')
        <!-- partial -->
        <div class="container-fluid page-body-wrapper">
            <!-- partial:partials/_settings-panel.html -->
            <div class="theme-setting-wrapper">
                <div id="settings-trigger"><i class="ti-settings"></i></div>
                <div id="theme-settings" class="settings-panel">
                    <i class="settings-close ti-close"></i>
                    <p class="settings-heading">SIDEBAR SKINS</p>
                    <div class="sidebar-bg-options selected" id="sidebar-light-theme">
                        <div class="img-ss rounded-circle bg-light border mr-3"></div>Light
                    </div>
                    <div class="sidebar-bg-options" id="sidebar-dark-theme">
                        <div class="img-ss rounded-circle bg-dark border mr-3"></div>Dark
                    </div>
                    <p class="settings-heading mt-2">HEADER SKINS</p>
                    <div class="color-tiles mx-0 px-4">
                        <div class="tiles success"></div>
                        <div class="tiles warning"></div>
                        <div class="tiles danger"></div>
                        <div class="tiles info"></div>
                        <div class="tiles dark"></div>
                        <div class="tiles default"></div>
                    </div>
                </div>
            </div>

            <!-- partial -->
            <!-- partial:partials/_sidebar.html -->
            @include('user.includes.sidebar')
            <!-- partial -->
            <div class="main-panel">
                <div class="content-wrapper">
                    <div class="row">
                        <div class="col-md-12 grid-margin">
                            <div class="row">
                                <div class="col-12 col-xl-8 mb-4 mb-xl-0">
                                    <h3 class="font-weight-bold">Welcome @if($LoggedUserInfo)
                                        <span>{{ $LoggedUserInfo ['name'] }}</span>
                                        <span class="badge badge-primary">{{ $LoggedUserInfo ['role'] }}</span>

                                        @endif
                                    </h3>

                                    <h6 class="font-weight-normal mb-0">All systems are running smoothly! </h6>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 grid-margin stretch-card">
                            <div class="card tale-bg">
                                <div class="card-people mt-auto">
                                <img src="/images/dashboard/people.svg" alt="people">                                <div class="weather-info">
                                        <div class="d-flex">


                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6 grid-margin mt-6 transparent">
                            <div class="row">
                                <br>
                                <div class="col-md-6 mb-4 mt-4 stretch-card transparent">
                                    <div class="card card-tale">
                                        <a href="{{ url('user/purchases') }}"
                                            style="text-decoration: none; color: inherit;">
                                            <div class="card-body">
                                                <p class="mb-4">Total Purchases</p>
                                                <p class="fs-30 mb-2"> </p>
                                                <p>10.00% (30 days)</p>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-4 mt-4 stretch-card transparent">
                                    <div class="card card-dark-blue">
                                        <a href="{{ url('user/questions') }}"
                                            style="text-decoration: none; color: inherit;">
                                            <div class="card-body">
                                                <p class="mb-4">Total Ask Questions</p>
                                                <p class="fs-30 mb-2"> </p>
                                                <p>22.00% (30 days)</p>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-4 mb-lg-0 stretch-card transparent">
                                    <div class="card card-light-blue">
                                        <a href="{{ url('user/questions') }}"
                                            style="text-decoration: none; color: inherit;">
                                            <div class="card-body">
                                                <p class="mb-4">Total Likes On Questions</p>
                                                <p class="fs-30 mb-2"> </p>
                                                <p>2.00% (30 days)</p>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                                <div class="col-md-6 stretch-card transparent">
                                    <div class="card card-light-danger">
                                        <a href="{{ url('user/likes/products') }}"
                                            style="text-decoration: none; color: inherit;">
                                            <div class="card-body">
                                                <p class="mb-4">Products U Like</p>
                                                <p class="fs-30 mb-2"> </p>
                                                <p>0.22% (30 days)</p>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="col-12 grid-margin stretch-card">
                        <div class="card">

                        </div>
                    </div>

                    <!-- content-wrapper ends -->
                    <!-- partial:partials/_footer.html -->
                    <footer class="footer">
                        <div class="d-sm-flex justify-content-center justify-content-sm-between">
                            <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright ©
                                2021. Premium <a href="https://www.bootstrapdash.com/" target="_blank">Bootstrap admin
                                    template</a> from BootstrapDash. All rights reserved.</span>
                            <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Hand-crafted & made
                                with <i class="ti-heart text-danger ml-1"></i></span>
                        </div>
                    </footer>
                    <!-- partial -->
                </div>
                <!-- main-panel ends -->
            </div>
            <!-- page-body-wrapper ends -->
        </div>
        <!-- container-scroller -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
        

        <!-- plugins:js -->
        <script src="/vendors/js/vendor.bundle.base.js"></script>
        <!-- endinject -->
        <!-- Plugin js for this page -->
        <script src="/vendors/chart.js/Chart.min.js"></script>
        <script src="/vendors/datatables.net/jquery.dataTables.js"></script>
        <script src="/vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>
        <script src="/js/dataTables.select.min.js"></script>

        <!-- End plugin js for this page -->
        <!-- inject:js -->
        <script src="/js/off-canvas.js"></script>
        <script src="/js/hoverable-collapse.js"></script>
        <script src="/js/template.js"></script>
        <script src="/js/settings.js"></script>
        <script src="/js/todolist.js"></script>
        <!-- endinject -->
        <!-- Custom js for this page-->
        <script src="/js/dashboard.js"></script>
        <script src="/js/Chart.roundedBarCharts.js"></script>
        <!-- End custom js for this page-->
</body>

</html>












							profileview.blade.php



<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Skydash Admin</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://js.pusher.com/8.2.0/pusher.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <link rel="stylesheet" href="/vendors/feather/feather.css">
    <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" href="/vendors/css/vendor.bundle.base.css">
    <script src="https://kit.fontawesome.com/YOUR_KIT_ID.js" crossorigin="anonymous"></script>

    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" href="/vendors/datatables.net-bs4/dataTables.bootstrap4.css">
    <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" type="text/css" href="/js/select.dataTables.min.css">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="/css/vertical-layout-light/style.css">
    <!-- endinject -->
    <link rel="shortcut icon" href="/images/favicon.png" />
</head>

<body>

    <div class="container-scroller">
        <!-- partial:partials/_navbar.html -->
        @include('user.includes.navbar')
        <!-- partial -->
        <div class="container-fluid page-body-wrapper">
            <!-- partial:partials/_settings-panel.html -->
            <div class="theme-setting-wrapper">
                <div id="settings-trigger"><i class="ti-settings"></i></div>
                <div id="theme-settings" class="settings-panel">
                    <i class="settings-close ti-close"></i>
                    <p class="settings-heading">SIDEBAR SKINS</p>
                    <div class="sidebar-bg-options selected" id="sidebar-light-theme">
                        <div class="img-ss rounded-circle bg-light border mr-3"></div>Light
                    </div>
                    <div class="sidebar-bg-options" id="sidebar-dark-theme">
                        <div class="img-ss rounded-circle bg-dark border mr-3"></div>Dark
                    </div>
                    <p class="settings-heading mt-2">HEADER SKINS</p>
                    <div class="color-tiles mx-0 px-4">
                        <div class="tiles success"></div>
                        <div class="tiles warning"></div>
                        <div class="tiles danger"></div>
                        <div class="tiles info"></div>
                        <div class="tiles dark"></div>
                        <div class="tiles default"></div>
                    </div>
                </div>
            </div>

            <!-- partial -->
            <!-- partial:partials/_sidebar.html -->
            @include('user.includes.sidebar')
            <!-- partial -->
            <div class="main-panel">
                <div class="content-wrapper">
                    <div class="row">
                        <div class="col-md-12 grid-margin">
                            <div class="row">
                                <div class="col-12 col-xl-8 mb-4 mb-xl-0">
                                    <h3 class="font-weight-bold">Welcome @if($LoggedUserInfo)
                                        <span>{{ $LoggedUserInfo ['name'] }}</span>
                                        @endif
                                    </h3>
                                    <h6 class="font-weight-normal mb-0">All systems are running smoothly! </h6>
                                </div>
                                @if (session('success'))
                    <div class="alert alert-success fade show" role="alert">
                        <strong>Success:</strong> {{ session('success') }}
                    </div>
                    @endif
                                <br>
                                <div class="col-md-12 mt-4 grid-margin">
                                    <div class="card">
                                        <div class="card-body">
                                            <h4 class="card-title">Users Profile Info</h4>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <!-- Display user information -->
                                                    <p><strong>Name:</strong> {{ $LoggedUserInfo->name }}</p>
                                                    <p><strong>Email:</strong> {{ $LoggedUserInfo->email }}</p>
                                                    <p><strong>Phone:</strong> {{ $LoggedUserInfo->phone_number }}</p>
                                                    <p><strong>Phone:</strong> {{ $LoggedUserInfo->role }}</p>
                                                   
                                                    <p><strong>Account Created At :</strong> {{ $LoggedUserInfo->created_at}}</p>

                                                    
                                                    <p><strong>Bio:</strong> {{ $LoggedUserInfo->bio}}</p>

                                                        <!-- Add more fields as needed -->
                                                </div>
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <div class="col-md-3 ">
                                                    <!-- Display user image with a smaller size -->
                                                    @if($LoggedUserInfo->picture)
                                                    <img src="{{ asset('storage/' . $LoggedUserInfo->picture) }}"
                                                        alt="Profile Picture" class="img-fluid rounded"
                                                        style="width: 150px; height: 150px;">
                                                    @else
                                                    <p class="text-muted">No profile picture available</p>
                                                    @endif
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 grid-margin stretch-card">
                        <div class="card">

                        </div>
                    </div>

                    <!-- content-wrapper ends -->
                    <!-- partial:partials/_footer.html -->
                    <footer class="footer">
                        <div class="d-sm-flex justify-content-center justify-content-sm-between">
                            <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright ©
                                2021. Premium <a href="https://www.bootstrapdash.com/" target="_blank">Bootstrap admin
                                    template</a> from BootstrapDash. All rights reserved.</span>
                            <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Hand-crafted & made
                                with <i class="ti-heart text-danger ml-1"></i></span>
                        </div>
                    </footer>
                    <!-- partial -->
                </div>
                <!-- main-panel ends -->
            </div>
            <!-- page-body-wrapper ends -->
        </div>
        <!-- container-scroller -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
        <script src="https://js.pusher.com/8.2.0/pusher.min.js"></script>
        <script>
        // Enable pusher logging - don't include this in production
        Pusher.logToConsole = true;

        var pusher = new Pusher('b23d71886d55f985f153', {
            cluster: 'ap2'
        });

        var channel = pusher.subscribe('my-channel');
        channel.bind('form-submitted', function(data) {
            // Check if 'post' property exists and contains 'author' and 'title'
            if (data && data.post && data.post.author && data.post.title) {
                // Display a Toastr notification (sticky)
                toastr.success('New Post Created', 'Author: ' + data.post.author + '<br>Title: ' + data.post
                    .title, {
                        timeOut: 0, // Set timeOut to 0 for a sticky notification
                        extendedTimeOut: 0, // Set extendedTimeOut to 0 for a sticky notification
                    });
            } else {
                console.error('Invalid data structure received:', data);
            }
        });
        </script>
        <!-- plugins:js -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
        

        <!-- plugins:js -->
        <script src="/vendors/js/vendor.bundle.base.js"></script>
        <!-- endinject -->
        <!-- Plugin js for this page -->
        <script src="/vendors/chart.js/Chart.min.js"></script>
        <script src="/vendors/datatables.net/jquery.dataTables.js"></script>
        <script src="/vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>
        <script src="/js/dataTables.select.min.js"></script>

        <!-- End plugin js for this page -->
        <!-- inject:js -->
        <script src="/js/off-canvas.js"></script>
        <script src="/js/hoverable-collapse.js"></script>
        <script src="/js/template.js"></script>
        <script src="/js/settings.js"></script>
        <script src="/js/todolist.js"></script>
        <!-- endinject -->
        <!-- Custom js for this page-->
        <script src="/js/dashboard.js"></script>
        <script src="/js/Chart.roundedBarCharts.js"></script>
        <!-- End custom js for this page-->
</body>

</html>









							profileedit.blade.php



<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Skydash Admin</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://js.pusher.com/8.2.0/pusher.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <link rel="stylesheet" href="/vendors/feather/feather.css">
    <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" href="/vendors/css/vendor.bundle.base.css">
    <script src="https://kit.fontawesome.com/YOUR_KIT_ID.js" crossorigin="anonymous"></script>

    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" href="/vendors/datatables.net-bs4/dataTables.bootstrap4.css">
    <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" type="text/css" href="/js/select.dataTables.min.css">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="/css/vertical-layout-light/style.css">
    <!-- endinject -->
    <link rel="shortcut icon" href="/images/favicon.png" />
</head>

<body>

    <div class="container-scroller">
        <!-- partial:partials/_navbar.html -->
        @include('user.includes.navbar')
        <!-- partial -->
        <div class="container-fluid page-body-wrapper">
            <!-- partial:partials/_settings-panel.html -->
            <div class="theme-setting-wrapper">
                <div id="settings-trigger"><i class="ti-settings"></i></div>
                <div id="theme-settings" class="settings-panel">
                    <i class="settings-close ti-close"></i>
                    <p class="settings-heading">SIDEBAR SKINS</p>
                    <div class="sidebar-bg-options selected" id="sidebar-light-theme">
                        <div class="img-ss rounded-circle bg-light border mr-3"></div>Light
                    </div>
                    <div class="sidebar-bg-options" id="sidebar-dark-theme">
                        <div class="img-ss rounded-circle bg-dark border mr-3"></div>Dark
                    </div>
                    <p class="settings-heading mt-2">HEADER SKINS</p>
                    <div class="color-tiles mx-0 px-4">
                        <div class="tiles success"></div>
                        <div class="tiles warning"></div>
                        <div class="tiles danger"></div>
                        <div class="tiles info"></div>
                        <div class="tiles dark"></div>
                        <div class="tiles default"></div>
                    </div>
                </div>
            </div>

            <!-- partial -->
            <!-- partial:partials/_sidebar.html -->
            @include('user.includes.sidebar')
            <!-- partial -->
            <div class="main-panel">
                <div class="content-wrapper">
                    <div class="row">
                        <div class="col-md-12 grid-margin">
                            <div class="row">
                                <div class="col-12 col-xl-8 mb-4 mb-xl-0">
                                    <h3 class="font-weight-bold">Welcome @if($LoggedUserInfo)
                                        <span>{{ $LoggedUserInfo ['name'] }}</span>
                                        @endif
                                    </h3>
                                    <h6 class="font-weight-normal mb-0">All systems are running smoothly! </h6>
                                </div>

                                <br>
                                <div class="col-md-12 mt-4 grid-margin">
                                    <div class="card">
                                        <div class="card-body">
                                            <h4 class="card-title">Users Profile Edit</h4>

                                            <form action="{{ route('user.updateProfile') }}" method="POST" enctype="multipart/form-data">
                    @csrf
                    @method('PUT')
                    <div class="row">
                        <div class="col-md-6">
                            <!-- Display user information -->
                            <div class="form-group">
                                <label for="name"><strong>Name:</strong></label>
                                <input type="text" class="form-control" id="name" name="name" value="{{ $LoggedUserInfo->name }}" required>
                            </div>
                            <div class="form-group">
                                <label for="email"><strong>Email:</strong></label>
                                <input type="email" class="form-control" id="email" name="email" value="{{ $LoggedUserInfo->email }}" disabled>
                            </div>
                            <div class="form-group">
                                <label for="phone_number"><strong>Phone:</strong></label>
                                <input type="text" class="form-control" id="phone_number" name="phone_number" value="{{ $LoggedUserInfo->phone_number }}" required>
                            </div>
                            <div class="form-group">
                                <label for="created_at"><strong>Account Created At:</strong></label>
                                <input type="text" class="form-control" id="created_at" name="created_at" value="{{ $LoggedUserInfo->created_at }}" disabled>
                            </div>
                            <div class="form-group">
                                <label for="bio"><strong>Bio:</strong></label>
                                <textarea class="form-control" id="bio" name="bio" rows="3">{{ $LoggedUserInfo->bio }}</textarea>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <!-- Display user image with a smaller size -->
                            <div class="form-group">
                                @if($LoggedUserInfo->picture)
                                    <img src="{{ asset('storage/' . $LoggedUserInfo->picture) }}" alt="Profile Picture" class="img-fluid rounded" style="width: 150px; height: 150px;">
                                @else
                                    <p class="text-muted">No profile picture available</p>
                                @endif
                            </div>
                            <div class="form-group">
                                <label for="picture"><strong>Update Profile Picture:</strong></label>
                                <input type="file" class="form-control-file" id="picture" name="picture">
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Update Profile</button>
                </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 grid-margin stretch-card">
                        <div class="card">

                        </div>
                    </div>

                    <!-- content-wrapper ends -->
                    <!-- partial:partials/_footer.html -->
                    <footer class="footer">
                        <div class="d-sm-flex justify-content-center justify-content-sm-between">
                            <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright ©
                                2021. Premium <a href="https://www.bootstrapdash.com/" target="_blank">Bootstrap admin
                                    template</a> from BootstrapDash. All rights reserved.</span>
                            <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Hand-crafted & made
                                with <i class="ti-heart text-danger ml-1"></i></span>
                        </div>
                    </footer>
                    <!-- partial -->
                </div>
                <!-- main-panel ends -->
            </div>
            <!-- page-body-wrapper ends -->
        </div>
        <!-- container-scroller -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
        <script src="https://js.pusher.com/8.2.0/pusher.min.js"></script>
        <script>
        // Enable pusher logging - don't include this in production
        Pusher.logToConsole = true;

        var pusher = new Pusher('b23d71886d55f985f153', {
            cluster: 'ap2'
        });

        var channel = pusher.subscribe('my-channel');
        channel.bind('form-submitted', function(data) {
            // Check if 'post' property exists and contains 'author' and 'title'
            if (data && data.post && data.post.author && data.post.title) {
                // Display a Toastr notification (sticky)
                toastr.success('New Post Created', 'Author: ' + data.post.author + '<br>Title: ' + data.post
                    .title, {
                        timeOut: 0, // Set timeOut to 0 for a sticky notification
                        extendedTimeOut: 0, // Set extendedTimeOut to 0 for a sticky notification
                    });
            } else {
                console.error('Invalid data structure received:', data);
            }
        });
        </script>
        <!-- plugins:js -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
        

        <!-- plugins:js -->
        <script src="/vendors/js/vendor.bundle.base.js"></script>
        <!-- endinject -->
        <!-- Plugin js for this page -->
        <script src="/vendors/chart.js/Chart.min.js"></script>
        <script src="/vendors/datatables.net/jquery.dataTables.js"></script>
        <script src="/vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>
        <script src="/js/dataTables.select.min.js"></script>

        <!-- End plugin js for this page -->
        <!-- inject:js -->
        <script src="/js/off-canvas.js"></script>
        <script src="/js/hoverable-collapse.js"></script>
        <script src="/js/template.js"></script>
        <script src="/js/settings.js"></script>
        <script src="/js/todolist.js"></script>
        <!-- endinject -->
        <!-- Custom js for this page-->
        <script src="/js/dashboard.js"></script>
        <script src="/js/Chart.roundedBarCharts.js"></script>
        <!-- End custom js for this page-->
</body>

</html>









							chats.blade.php




<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Skydash Admin</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <link rel="stylesheet" href="/vendors/feather/feather.css">
    <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" href="/vendors/css/vendor.bundle.base.css">

    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" href="/vendors/datatables.net-bs4/dataTables.bootstrap4.css">
    <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" type="text/css" href="/usertemplate/js/select.dataTables.min.css">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="/css/vertical-layout-light/style.css">
    <!-- endinject -->
    <link rel="shortcut icon" href="/images/favicon.png" />
</head>
<style>
    .chat-list {
        max-height: 500px;
        overflow-y: auto;
    }

    .chat-item {
        display: flex;
        align-items: center;
        padding: 10px;
        cursor: pointer;
    }

    .chat-item:hover {
        background-color: #f5f5f5;
    }

    .avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        margin-right: 10px;
    }

    .chat-details {
        flex: 1;
    }

    .chat-title {
        display: flex;
        align-items: center;
        padding: 10px;
    }

    .chat-message {
        display: flex;
        margin-bottom: 10px;
    }

    .message-avatar {
        margin-right: 10px;
    }

    .message-content {
        background-color: #f2f2f2;
        padding: 10px;
        border-radius: 10px;
    }

    .sender .message-content {
        background-color: #dcf8c6;
    }

    .card-footer {
        padding: 10px;
    }

    .chat-window {
        max-height: 500px;
        overflow-y: auto;
    }

    .chat-message-container {
        min-height: 400px;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #ffffff;
        ;
        margin-bottom: 10px;
    }

    .chat-message.sender {
        margin-bottom: 10px;
        text-align: left;
    }

    .chat-message.receiver {
        margin-bottom: 10px;
        text-align: right;
    }

    .list-group-item.active {
        z-index: 2;
        color: #fff;
        background-color: #4B49AC;
        border-color: #4B49AC;
    }

    .chat-message {
        display: flex;
        align-items: center;
        margin: 10px 0;
    }

    .chat-message .message-avatar img {
        width: 40px;
        height: 40px;
    }

    .chat-message .message-content {
        display: inline-block;
        padding: 10px;
        border-radius: 5px;
        background-color: #f1f1f1;
        margin: 0 10px;
        max-width: 70%;
    }

    .chat-message.sender .message-content {
        background-color: #d1e7dd;
        /* Example color for sender */
        text-align: right;
        margin-left: auto;
        /* Align right */
    }

    .chat-message.sender {
        flex-direction: row-reverse;
    }

    .chat-message .timestamp {
        font-size: 0.8em;
        color: #888;
    }

    .chat-message.sender .timestamp {
        margin-right: 10px;
    }

    .profile_card {
        display: flex;
        align-items: center;
        padding: 15px;
        margin: 10px 0;
        background-color: #f8f9fa;
        /* Light background color */
        border-radius: 10px;
        /* Rounded corners */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        /* Subtle shadow */
        transition: transform 0.2s;
        /* Animation for hover effect */
    }

    .profile_card:hover {
        transform: translateY(-5px);
        /* Lift the card on hover */
    }

    .profile_img {
        width: 60px;
        /* Avatar size */
        height: 60px;
        margin-right: 15px;
        border: 2px solid #007bff;
        /* Border color matching badge */
    }

    .chat-details {
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .profile_name {
        font-size: 1.1em;
        /* Slightly larger font size */
        font-weight: bold;
        color: #343a40;
        /* Darker text color */
        margin-bottom: 5px;
    }

    .badge-primary {
        background-color: #007bff;
        /* Badge background color */
        color: #fff;
        /* Badge text color */
        padding: 5px 10px;
        border-radius: 5px;
        font-size: 0.9em;
        align-self: flex-start;
        /* Align the badge to the start */
    }
</style>

<body>

    <div class="container-scroller">
        <!-- partial:partials/_navbar.html -->
        @include('user.includes.navbar')
        <!-- partial -->
        <div class="container-fluid page-body-wrapper">
            <!-- partial:partials/_settings-panel.html -->
            <div class="theme-setting-wrapper">
                <div id="settings-trigger"><i class="ti-settings"></i></div>
                <div id="theme-settings" class="settings-panel">
                    <i class="settings-close ti-close"></i>
                    <p class="settings-heading">SIDEBAR SKINS</p>
                    <div class="sidebar-bg-options selected" id="sidebar-light-theme">
                        <div class="img-ss rounded-circle bg-light border mr-3"></div>Light
                    </div>
                    <div class="sidebar-bg-options" id="sidebar-dark-theme">
                        <div class="img-ss rounded-circle bg-dark border mr-3"></div>Dark
                    </div>
                    <p class="settings-heading mt-2">HEADER SKINS</p>
                    <div class="color-tiles mx-0 px-4">
                        <div class="tiles success"></div>
                        <div class="tiles warning"></div>
                        <div class="tiles danger"></div>
                        <div class="tiles info"></div>
                        <div class="tiles dark"></div>
                        <div class="tiles default"></div>
                    </div>
                </div>
            </div>

            <!-- partial -->
            <!-- partial:partials/_sidebar.html -->
            @include('user.includes.sidebar')
            <!-- partial -->
            <div class="main-panel">
                <div class="content-wrapper">
                    <div class="row">
                        <div class="col-md-12 grid-margin">
                            <div class="row">


                                <br>
                                <div class="col-md-12 mt-4 grid-margin">
    <div class="row">
        <!-- Left column: Chat list -->
        <div class="col-md-4 col-lg-3">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">Chats</h4>
                </div>
                <div class="list-group chat-list" id="chatList" style="max-height: 500px; overflow-y: auto;">
                    <ul class="list-group list-group-flush">
                        @foreach ($users as $user)
                        <li class="list-group-item d-flex align-items-center chat-item">
                            <img src="{{ asset('storage/' . $user->picture) }}" class="profile_img rounded-circle mr-3" style="width: 40px; height: 40px;" alt="Profile Picture">
                            <div class="profile_info">
                                <span class="profile_name font-weight-bold">{{ $user->name }}</span>
                                <span class="id" style="display: none;">{{ $user->id }}</span>
                            </div>
                        </li>
                        @endforeach
                    </ul>
                </div>
            </div>
        </div>

        <!-- Right column: Chat area -->
        <div class="col-md-8 col-lg-9">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <div class="d-flex align-items-center">
                        <img id="chat_img" src="" class="rounded-circle mr-3" alt="Profile Picture" style="width: 40px; height: 40px;">
                        <h4 class="mb-0" id="chat_name">Chatting with</h4>
                    </div>
                </div>

                <div class="card-body chat-window" style="height: 400px; overflow-y: auto;">
                    <div class="chat-message-container" id="chatMessageContainer">
                        <!-- Chat messages will be dynamically loaded here -->
                    </div>
                </div>

                <div class="card-footer">
                    <form id="messageForm" method="POST">
                        @csrf
                        <input type="hidden" name="receiver_id" id="receiver_id">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Type your message here..." id="messageInput" name="message">
                            <button class="btn btn-primary" type="submit" id="sendMessageButton">Send</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


                            </div>
                        </div>
                    </div>

                    <div class="col-12 grid-margin stretch-card">
                        <div class="card">

                        </div>
                    </div>



                    <!-- content-wrapper ends -->
                    <!-- partial:partials/_footer.html -->
                    <footer class="footer">
                        <div class="d-sm-flex justify-content-center justify-content-sm-between">
                            <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright ©
                                2021. Premium <a href="https://www.bootstrapdash.com/" target="_blank">Bootstrap admin
                                    template</a> from BootstrapDash. All rights reserved.</span>
                            <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Hand-crafted & made
                                with <i class="ti-heart text-danger ml-1"></i></span>
                        </div>
                    </footer>
                    <!-- partial -->
                </div>
                <!-- main-panel ends -->
            </div>
            <!-- page-body-wrapper ends -->
        </div>
        <script src="{{ asset('/build/assets/app-D1ylovWN.js') }}"></script>

        <!-- container-scroller -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
        <script src="https://js.pusher.com/8.2.0/pusher.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <!-- plugins:js -->
        <script src="/vendors/js/vendor.bundle.base.js"></script>
        <!-- endinject -->
        <!-- Plugin js for this page -->
        <script src="/vendors/chart.js/Chart.min.js"></script>
        <script src="/vendors/datatables.net/jquery.dataTables.js"></script>
        <script src="/vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>
        <script src="/js/dataTables.select.min.js"></script>

        <!-- End plugin js for this page -->
        <!-- inject:js -->
        <script src="/js/off-canvas.js"></script>
        <script src="/js/hoverable-collapse.js"></script>
        <script src="/js/template.js"></script>
        <script src="/js/settings.js"></script>
        <script src="/js/todolist.js"></script>
        <!-- endinject -->
        <!-- Custom js for this page-->
        <script src="/js/dashboard.js"></script>
        <script src="/js/Chart.roundedBarCharts.js"></script>
        <!-- End custom js for this page-->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/pusher/7.0.3/pusher.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pusher/7.0.3/pusher.min.js"></script>
       <script>
// Initialize Pusher
var loggedUserInfo = @json($LoggedUserInfo);
var receiverId = loggedUserInfo.id; // The receiverId will be the logged user's ID

var pusher = new Pusher('89f4dd829f60fced8820', {
    cluster: 'ap2',
    encrypted: true
});

// Subscribe to the public channel based on the receiverId
var channel = pusher.subscribe('chat.' + receiverId); // Use dynamic receiverId

// Bind to the 'seller-buyer-message' event
channel.bind('seller-buyer-message', function (data) {
    console.log('Message received:', data);

    let senderId = data.sender_id;
    let message = data.message;
    let senderName = data.sender_name;
    let senderImage = data.sender_image 
        ? `{{ asset('storage/') }}/${data.sender_image}` // Construct the full asset URL
        : `{{ asset('storage/default-avatar.jpg') }}`; // Default image

    let messageTime = data.time || new Date().toLocaleTimeString([], { // Use `time` from the payload
        hour: '2-digit',
        minute: '2-digit'
    });

    // Check if the logged-in user is the receiver before displaying the message
    if (data.receiver_id == receiverId) {
        let messageHtml = `
            <div class="chat-message receiver"> 
                <div class="message-avatar">
                    <img src="${senderImage}" class="rounded-circle avatar" alt="${senderName} Avatar">
                </div>
                <div class="message-content">
                    <p><strong>${senderName}:</strong> ${message}</p>
                    <div class="timestamp">${messageTime}</div>
                </div>
            </div>`;

        // Append message to chat container
        document.getElementById('chatMessageContainer').insertAdjacentHTML('beforeend', messageHtml);

        // Scroll to the bottom of the chat container
        $('#chatMessageContainer').scrollTop($('#chatMessageContainer')[0].scrollHeight);
    }
});
</script>


    <script>$('.chat-item').on('click', function() {
    let profileImage = $(this).find('.profile_img').attr('src');
    let profileName = $(this).find('.profile_name').text();
    let receiverId = $(this).find('.id').text();
    $('#receiver_id').val(receiverId);
    $('#chat_img').attr('src', profileImage);
    $('#chat_name').text('Chatting with ' + profileName);

    $.ajax({
    url: '{{ route('fetch.messages') }}',
    method: 'GET',
    data: { receiver_id: receiverId },
    success: function(response) {
        $('#chatMessageContainer').empty();

        response.messages.forEach(function(message) {
            let isSender = message.sender_id == '{{ session('LoggedUserInfo') }}';
            let userAvatar = isSender ? '{{ asset('storage/' . $LoggedUserInfo->picture) }}' : profileImage;
            let userName = isSender ? '{{ $LoggedUserInfo->name }}' : profileName;

            let messageTime = new Date(message.created_at).toLocaleTimeString([], {
                hour: '2-digit',
                minute: '2-digit'
            });

            let messageHtml = `
                <div class="chat-message ${isSender ? 'sender' : 'receiver'}">
                    <div class="message-avatar">
                        <img src="${userAvatar}" class="rounded-circle avatar" alt="User Avatar">
                    </div>
                    <div class="message-content">
                        <p><strong>${userName}:</strong> ${message.message}</p>
                        <div class="timestamp">${messageTime}</div>
                    </div>
                </div>`;
            $('#chatMessageContainer').append(messageHtml);
        });

        // Scroll to the bottom of the chat container
        $('#chatMessageContainer').scrollTop($('#chatMessageContainer')[0].scrollHeight);
    },
    error: function(xhr, status, error) {
        console.error('Error fetching messages:', error);
    }
});

});
</script>


<script>$('#messageForm').on('submit', function(e) {
    e.preventDefault();

    let message = $('#messageInput').val().trim();
    let receiverId = $('#receiver_id').val();

    if (message === "") {
        alert("Message cannot be empty.");
        return;
    }

    $.ajax({
        type: 'POST',
        url: '{{ route('send.message') }}', // Ensure route is correct
        data: {
            _token: $('input[name="_token"]').val(),
            message: message,
            receiver_id: receiverId
        },
        beforeSend: function() {
            // Disable the send button and change its text to "Sending..."
            $('#sendMessageButton').text('Sending...').attr('disabled', true);
        },
        success: function(response) {
            if (response.success) {
                toastr.success(response.message, "Success");
                $('#messageInput').val(''); // Clear the input

                let userAvatar = '{{ asset('storage/' . $LoggedUserInfo->picture) }}';
                let userName = '{{ $LoggedUserInfo->name }}';

                let messageTime = new Date().toLocaleTimeString([], {
                    hour: '2-digit',
                    minute: '2-digit'
                });

                let messageHtml = `
                    <div class="chat-message sender">
                        <div class="message-avatar">
                            <img src="${userAvatar}" class="rounded-circle avatar" alt="User Avatar">
                        </div>
                        <div class="message-content">
                            <p><strong>${userName}:</strong> ${message}</p>
                            <div class="timestamp">${messageTime}</div>
                        </div>
                    </div>`;

                $('#chatMessageContainer').append(messageHtml);

                // Scroll to the bottom of the chat container after sending a message
                $('#chatMessageContainer').scrollTop($('#chatMessageContainer')[0].scrollHeight);
            } else {
                toastr.error(response.message, "Error");
            }
        },
        error: function(xhr) {
            console.error('Error:', xhr.responseJSON.message);
            toastr.error('Failed to send message', "Error");
        },
        complete: function() {
            // Re-enable the send button and change its text back to "Send"
            $('#sendMessageButton').text('Send').attr('disabled', false);
        }
    });
});

</script>

</body>

</html>			









									Routes  web.php


<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\SellerController;
use App\Http\Controllers\ChatsController;
use App\Http\Controllers\UserController;

use App\Http\Controllers\BuyerController;
 
Route::get('/', function () {
    return view('welcome');
});
Route::post('/user/save', [UserController::class, 'save'])->name('user.save');
Route::post('/user/check', [UserController::class, 'check'])->name('user.check');
Route::get('/user/logout', [UserController::class, 'logout'])->name('user.logout');
Route::get('/user/profile', [UserController::class, 'profile'])->name('user.profile');
Route::get('/user/login', [UserController::class, 'login'])->name('user.login');
Route::get('/user/profile', [UserController::class, 'profile'])->name('user.profile');
Route::get('/user/register', [UserController::class, 'register'])->name('user.register');
Route::get('/user/profileview', [UserController::class, 'profile'])->name('user.profileview');
Route::get('/user/profileedit', [UserController::class, 'edit'])->name('user.profileedit');
Route::get('/user/chats', [UserController::class, 'chats'])->name('user.chats');
Route::put('/user/updateProfile', [UserController::class, 'updateProfile'])->name('user.updateProfile');
Route::get('/user/dashboard', [UserController::class, 'dashboard'])->name('user.dashboard');
// Route for fetching messages
Route::get('/fetch-messages', [ChatsController::class, 'fetchMessages'])->name('fetch.messages');

// Route for sending messages
Route::post('/send-message', [ChatsController::class, 'sendMessage'])->name('send.message');












										Event MessageSent.php

<?php

namespace App\Events;

use Illuminate\Broadcasting\Channel;
use Illuminate\Broadcasting\InteractsWithSockets;
use Illuminate\Broadcasting\PresenceChannel;
use Illuminate\Broadcasting\PrivateChannel;
use Illuminate\Contracts\Broadcasting\ShouldBroadcast;
use Illuminate\Foundation\Events\Dispatchable;
use Illuminate\Queue\SerializesModels;
class MessageSent implements ShouldBroadcast
{
    use Dispatchable, InteractsWithSockets, SerializesModels;

    public $message;
    public $sender_id;
    public $receiver_id;
    public $sender_name;
    public $sender_image;
    public $time;
    public function __construct($message, $sender_id, $receiver_id, $sender_name, $sender_image)
    {
        $this->message = $message;
        $this->sender_id = $sender_id;
        $this->receiver_id = $receiver_id;
        $this->sender_name = $sender_name;
        $this->sender_image = $sender_image ?? 'default-avatar.jpg'; 
        $this->time = now()->timezone('Asia/Karachi')->format('h:i A');
    }
    public function broadcastOn()
    {
        return new Channel('chat.' . $this->receiver_id); 
    }
     public function broadcastAs()
    {
        return 'seller-buyer-message';  
    }
}